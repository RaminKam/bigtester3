package testergui.testerframeforteacher.handlers;

import java.awt.EventQueue;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.List;

import javax.swing.table.*;
import javax.swing.*;
import testergui.testerframeforteacher.TesterFrameForTeacher;
import testergui.testerframeforteacher.dialoggui.choicetest.ChoiceTestForTeacherDialog;
import testergui.testerframeforteacher.dialoggui.choicetest.handlers.ChoiceTestForTeacherDialog_Linker;
import hibernate.db.*;
import hibernate.dbacts.DBActs;
public class OpenTest_JButton_TesterFrameForTeacher_Handler implements ActionListener, Runnable{
	//Input:
	Teacher currTeach;
	TesterFrameForTeacher testerframe;
	//Used only here:
	Thread th;
	//Created here:
	ChoiceTestForTeacherDialog choiceDialog;
	ChoiceTestTableModel tbm;								//It's also output data to testerforteacherframe
	public OpenTest_JButton_TesterFrameForTeacher_Handler(TesterFrameForTeacher testerframe, Teacher currTeach){
		this.testerframe=testerframe;
		this.currTeach=currTeach;
	}
	public void actionPerformed(ActionEvent e){
		th=new Thread(this);
		th.start();
	}
	public void run(){
		EventQueue.invokeLater(new Runnable(){
			public void run(){
				try {
					testerframe.getStatusLabel().setText("Status = work with DB");
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
		//Next - get list of Tests for current Teacher
		final List<Test> tests=DBActs.getListTestForTeacher(currTeach.getId_teach());
		

		
		EventQueue.invokeLater(new Runnable(){
			public void run()
			{
				try {
					testerframe.getStatusLabel().setText("Status = you work");
					//View choice dialog
					choiceDialog=new ChoiceTestForTeacherDialog(testerframe);
					ChoiceTestForTeacherDialog_Linker choiceLinker=new ChoiceTestForTeacherDialog_Linker(testerframe,choiceDialog);
					tbm=new ChoiceTestTableModel(tests);
					choiceDialog.getTable().setModel(tbm);

				} catch (Exception e) 
				{
					e.printStackTrace();
				}
			}
		});

	}

}
